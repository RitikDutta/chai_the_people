<!DOCTYPE html>
<html lang="">
  <head>
    <meta name="google-signin-client_id" content="533965148281-oboi50ihru7smbjs5ds72ljku7cek8ee.apps.googleusercontent.com">
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <style type="text/css">
      .hide{
        display: none;
      } 
    </style>
  </head>
  <body>
    <p>New User?</p>
    <form action="/action_page.php">
  <input type="radio" name="new" onclick="myFunction(this.value)" value="yes">Yes<br>
  <input type="radio" name="new" onclick="myFunction(this.value)" value="no">No<br>
  
  <input class="hide" type="text" id="result">
  <input class="hide" type="submit" value="Submit form">

</form>

    <div id="g_id_onload"
         data-client_id="533965148281-oboi50ihru7smbjs5ds72ljku7cek8ee.apps.googleusercontent.com"
         data-context="signin"
         data-auto_prompt="false"
         data-ux_mode="popup"
         data-callback="handleCredentialResponse">
    </div>


    <div class="g_id_signin"
         data-type="standard"
         data-shape="pill"
         data-theme="filled_blue"
         data-text="signin_with"
         data-size="large"
         data-logo_alignment="left">
    </div>



    <p>If you don't want to login with your google you can click here to login with demo account</p>
    <button onclick="demoUser()">Click me</button>

    <script>
      function myFunction(browser) {
  document.getElementById("result").value = browser;
  const chk = document.getElementById("result").value = browser;
  console.log(chk)
}

function demoUser(){
  const chk = document.getElementById("result").value;
  if (chk == 'no') {
            window.open(`/questions?id=115211234`,"_self")
          }
          else{
            window.open(`/add_user?id=115211234`,"_self")
          }
}


      function handleCredentialResponse(response) {
        const responcePayload = decodeJwtResponse(response.credential);
          const name = responcePayload.name
          const id = responcePayload.sub
          const chk = document.getElementById("result").value;
          console.log("ID: " + responcePayload.sub)
          console.log("Full Name: " + responcePayload.name)
          console.log(responcePayload)
          console.log(name)
          if (chk == 'no') {
            window.open(`/questions?id=${id}`,"_self")
          }
          else{
            window.open(`/add_user?id=${id}`,"_self")
          }
      }

      function decodeJwtResponse(data){
        var tokens = data.split(".")
        return JSON.parse(atob(tokens[1]));
      }
    </script>
  </body>
</html>
